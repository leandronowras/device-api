# Task ID: 6
# Title: Feature: Filter devices by state
# Status: pending
# Dependencies: None
# Priority: medium
# Description: Support state filtering via query parameter.
# Details:
Given devices in different states exist
When GET /v1/devices?state=in-use
Then only devices with state 'in-use' are returned


# Test Strategy:


# Subtasks:
## 601. Scenario: User can filter by state with pagination [pending]
### Dependencies: None
### Description: Happy Path
### Details:
Given devices exist in states available, in-use, inactive
When GET /v1/devices?state=inactive&limit=10
Then respond 200 with only inactive devices and possibly next_cursor


## 602. Scenario: User gets 422 for invalid state filter [pending]
### Dependencies: None
### Description: Validation Error
### Details:
Given the client sends GET /v1/devices?state=broken
When the request is processed
Then respond 422 with field_errors for state


